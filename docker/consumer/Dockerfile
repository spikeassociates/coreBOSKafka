FROM openjdk
ARG COREBOS_BASE_URL
ARG KAFKA_HOST
ARG API_BASE_URL
ARG COREBOS_USER
ARG COREBOS_ACCESSKEY
ARG TOPIC_NAME
ARG CONSUMER_GROUP_ID
ARG USE_MAPPING_FLAG
ARG FIELD_DO_QUERY

ENV COREBOS_BASE_URLENV "$COREBOS_BASE_URL"
ENV KAFKA_HOSTENV "$KAFKA_HOST"
ENV API_BASE_URLENV "$API_BASE_URL"
ENV COREBOS_USERENV "$COREBOS_USER"
ENV COREBOS_ACCESSKEYENV "$COREBOS_ACCESSKEY"
ENV TOPIC_NAMEENV "$TOPIC_NAME"
ENV CONSUMER_GROUP_IDENV "$CONSUMER_GROUP_ID"
ENV USE_MAPPING_FLAGENV "$USE_MAPPING_FLAG"
ENV FIELD_DO_QUERYENV "$FIELD_DO_QUERY"

MAINTAINER Mario Anthony "m.mbinda@spikeassociates.com"
COPY deploy /opt/kafka/consumer
WORKDIR /opt/kafka/consumer
CMD java -cp corebos-1.0-SNAPSHOT-jar-with-dependencies.jar UpdateConsumerExe